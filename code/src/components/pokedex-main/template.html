<div class="pokedex-container ${x => x.rightWingVisible ? 'wing-open' : 'wing-closed'}">
    <!-- Left Panel - Main Pokedex -->
    <div class="pokedex-left-panel">
        <!-- Top Section - Header with lens, lights, connection status -->
        <pokedex-header 
            :connected="${x => x.isConnected}"
            :pokemonData="${x => x.pokemonData}"
            :rightWingVisible="${x => x.rightWingVisible}"
            @toggle-settings="${x => x.handleToggleSettings()}"
            @toggle-wing="${x => x.toggleRightWing()}">
        </pokedex-header>
        
        <!-- Main Screen -->
        <pokedex-screen 
            :output="${x => x.output}"
            :isGenerating="${x => x.isGenerating}"
            :contentReady="${x => x.contentReady}">
        </pokedex-screen>
        
        <!-- Input Section -->
        <pokedex-input 
            :query="${x => x.query}"
            :isGenerating="${x => x.isGenerating}"
            @search="${(x, c) => x.handleSearch(c.event)}">
        </pokedex-input>                    
    </div>
    
    <!-- Right Wing Panel - Pokemon Data Display -->
    <div class="pokedex-right-wing ${x => x.pokemonData ? 'visible' : 'hidden'}">
        <!-- Tab Navigation -->
        <div class="wing-tabs">
            <button 
                class="tab-button ${x => x.activeRightTab === 'data' ? 'active' : ''}"
                @click="${(x, c) => x.switchRightTab('data')}"
            >
                <i class="fa fa-database"></i>
                <span>${'pokedex.rightWing.dataTab'.t()}</span>
            </button>
            <button 
                class="tab-button ${x => x.activeRightTab === 'map' ? 'active' : ''}"
                @click="${(x, c) => x.switchRightTab('map')}"
            >
                <i class="fa fa-map"></i>
                <span>${'pokedex.rightWing.mapTab'.t()}</span>
            </button>
            <button class="btn-close-wing" @click="${x => x.pokemonData = null}" title="'pokedex.closePanel'.t()">
                <i class="fa fa-times"></i>
            </button>
        </div>

        <!-- Tab Content -->
        <div class="wing-content">
            <!-- Data Tab -->
            <div class="tab-panel ${x => x.activeRightTab === 'data' ? 'active' : ''}" data-tab="data">
                <div class="pokemon-data-display" :innerHTML="${x => x.pokemonDataOutput}"></div>
            </div>
            
            <!-- Map Tab -->
            <div class="tab-panel ${x => x.activeRightTab === 'map' ? 'active' : ''}" data-tab="map">
                <div class="map-section">
                    <div class="map-placeholder">
                        <i class="fa fa-map map-icon"></i>
                        <h4>${'pokedex.rightWing.mapTitle'.t()}</h4>
                        <p>${'pokedex.rightWing.mapWorkInProgress'.t()}</p>
                        <div class="progress-indicator">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 25%"></div>
                            </div>
                            <span>25% Complete</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    ${when(x => x.showSettings, html`
        <rws-modal name="settings" header="pokedex.settingsTitle" max-width="600px" @modal-close="${x => x.handleSettingsClose()}">
            <pokedex-settings 
                :settings="${x => x.settings}"
                @settings-save="${(x, c) => x.handleSettingsSave(c.event.detail)}"
                @settings-clear="${x => x.handleSettingsClear()}">
            </pokedex-settings>
        </rws-modal>
    `)}
</div>