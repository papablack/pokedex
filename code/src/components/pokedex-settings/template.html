<form class="settings-form">
    <div class="form-group">
        <label class="form-label">
            <i class="fa fa-key"></i>
            ${'pokedex.apiKey'.t()}
        </label>
        <div class="input-group">
            <input 
                title="'pokedex.apiKeyInputTitle'.t()"
                type="${x => x.showApiKey ? 'text' : 'password'}"
                class="form-input"
                :value="${x => x.hasCustomApiKey ? x.tempSettings?.apiKey : ''}"
                @input="${(x, c) => x.updateTempSetting('apiKey', c.event.target.value)}"
                :placeholder="'pokedex.enterApiKey'.t()"
            />
            <button 
                title="'pokedex.toggleVisibility'.t()"
                class="btn-toggle" 
                type="button" 
                @click="${x => x.toggleApiKeyVisibility()}"
            >
                <i class="fa ${x => x.showApiKey ? 'fa-eye-slash' : 'fa-eye'}"></i>
            </button>
        </div>
        <div class="form-text">
            ${'pokedex.getApiKey'.t()} 
            <a title="${'pokedex.getApiKey'.t()} " rel="noreferrer noopener" href="https://openrouter.ai/keys" target="_blank">OpenRouter.ai</a>
        </div>
    </div>

    <div class="form-group">
        <label class="form-label">
            <i class="fa fa-microchip"></i>
            ${'pokedex.model'.t()}
        </label>
        <select 
            class="form-select"
            title="${'pokedex.modelSelectTitle'.t()}"            
            :value="${x => x.tempSettings?.model}"
            @change="${(x, c) => x.updateTempSetting('model', c.event.target.value)}"
        >
            ${repeat(x => x.modelsList, html`
                ${when((x, c) => (c.parent.hasCustomApiKey) || (!c.parent.hasCustomApiKey && x.free), html`<option value="${m => m.value}">${m => m.label}</option>`)}
            `)}
        </select>
        <div class="form-text" ?hidden="${x => x.hasCustomApiKey}">
            ${'pokedex.modelSelectionInfo'.t()}
        </div>
    </div>

    <div class="form-group">
        <label class="form-label">
            <i class="fa fa-globe"></i>
            ${'pokedex.language'.t()}
        </label>
        <select 
            class="form-select"
            title="${'pokedex.languageSelectTitle'.t()}"
            :value="${x => x.tempSettings?.language || 'pl'}"
            @change="${(x, c) => x.updateTempSetting('language', c.event.target.value)}"
        >
            <option value="pl">${'pokedex.languagePolish'.t()}</option>
            <option value="en">${'pokedex.languageEnglish'.t()}</option>           
        </select>
    </div>

    <div class="form-group">
        <label class="form-label">
            <i class="fa fa-thermometer-half"></i>
            ${'pokedex.temperature'.t()}: ${x => x.tempSettings?.temperature || 0.7}
        </label>
        <input 
            type="range" 
            class="form-range"
            title="${'pokedex.temperatureSliderTitle'.t()}"
            min="0" 
            max="2" 
            step="0.1"
            :value="${x => x.tempSettings?.temperature || 0.7}"
            @input="${(x, c) => x.updateTempSetting('temperature', parseFloat(c.event.target.value))}"
        >
        <div class="form-text">${'pokedex.temperatureDesc'.t()}</div>
    </div>

    <div class="form-group">
        <div class="form-switch">
            <input 
                type="checkbox" 
                title="${'pokedex.streamingCheckboxTitle'.t()}"
                :checked="${x => x.tempSettings?.streaming || false}"
                @change="${(x, c) => x.updateTempSetting('streaming', c.event.target.checked)}"
            >
            <label>
                <i class="fa fa-repeat"></i>
                ${'pokedex.streaming'.t()}
            </label>
        </div>
    </div>
</form>

<div class="modal-footer">
    <button type="button" class="btn-danger" @click="${x => x.clearSettings()}">
        <i class="fa fa-trash"></i>
        ${'pokedex.clear'.t()}
    </button>
    <button type="button" class="btn-primary" @click="${x => x.saveSettings()}">
        <i class="fa fa-check"></i>
        ${'pokedex.save'.t()}
    </button>
</div>